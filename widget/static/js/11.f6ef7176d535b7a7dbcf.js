webpackJsonp([11],{EZsJ:function(t,s,i){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var e=i("Cz8s"),n=i("VFiX"),a=i("Au9i"),o=(e.a,{data:function(){return{type:"tab",address_detail:null,headtitle:"考勤打卡",showDkbtn:!0,showDkedbtn:!0,nowTime:"",nowDate:"",userid:"",token:"",name:"",lon:"",lat:"",morningdkTime:"",noondkTime:"",timeStage:"",address:"",worktime:""}},created:function(){var t=this;this.userid=this.$store.getters.getUser.data.userid,this.token=this.$store.getters.getUser.token,this.name=this.$store.getters.getUser.data.name,setInterval(this.getTime,1e3);var s=this.userid,i=this.token;a.Indicator.open({text:"正在加载...",spinnerType:"fading-circle"}),n.a.QUERYUSERDKTIME(this,{userid:s,token:i}).then(function(s){var i=s.body;if(a.Indicator.close(),i.success){var e=i.result;e&&("5101080"===i.costomno?t.worktime="09:00":"5101081"===i.costomno&&(t.worktime="08:55"),e.first_time?(t.showDkbtn=!1,t.morningdkTime=e.first_time):t.showDkbtn=!0,e.last_time?(t.showDkedbtn=!1,t.noondkTime=e.last_time):t.showDkedbtn=!0)}else a.MessageBox.alert(i.msg,"操作提示")},function(t){a.Indicator.close(),Object(a.Toast)({message:"读取打卡信息失败",position:"middle",duration:1e3})})},computed:{btnsbBg:function(){return"sbclockin"===this.timeStage?"sbdking":"sbdked"},btnxbBg:function(){return"xbclockin"===this.timeStage?"xbdking":"xbdked"}},methods:{getTime:function(){var t=new Date,s=t.getFullYear()+"-"+this.twoDigits(t.getMonth()+1)+"-"+this.twoDigits(t.getDate())+" ",i=this.twoDigits(t.getHours())+":"+this.twoDigits(t.getMinutes());this.nowTime=i,this.nowDate=s,1*t.getHours()<=12?this.timeStage="sbclockin":this.timeStage="xbclockin"},twoDigits:function(t){return t<10?"0"+t:t},readyMap:function(t){var s=window.api.require("bMap");s.hide(),s.getLocation({accuracy:"10m",autoStop:!0,filter:1},function(i,e){i.status?(this.lon=i.lon,this.lat=i.lat,s.getDistance({start:{lon:this.lon,lat:this.lat},end:{lon:104.098952,lat:30.67553}},function(i){i.status&&(s.getNameFromCoords({lon:this.lon,lat:this.lat},function(t,s){t.status&&(this.address=t.address)}),t(i.distance,this.address,this.lon,this.lat))})):alert(e.code)})},dkEvent:function(t){var s=this;"sbclockin"===t&&"xbclockin"===this.timeStage?a.MessageBox.alert("12:00过后无需打上班卡"):"xbclockin"===t&&"sbclockin"===this.timeStage&&a.MessageBox.alert("12:00之前无需打下班卡"),this.timeStage===t&&this.readyMap(function(i,e,o,c){if(i<100){var d={userid:s.userid,token:s.token,address:e,longitude:o,latitude:c};a.Indicator.open({text:"正在加载...",spinnerType:"fading-circle"}),n.a.INSERTKQRECORD(s,d).then(function(i){var e=i.body;a.Indicator.close(),e.success&&("sbclockin"===t?(s.morningdkTime=e.datetime,s.showDkbtn=!1):"xbclockin"===t&&(s.noondkTime=e.datetime,s.showDkedbtn=!1))},function(t){a.Indicator.close(),Object(a.Toast)({message:"打卡失败",position:"middle",duration:1e3})})}else a.MessageBox.alert("请在打卡范围内打卡","操作提示")})}},components:{"v-header":e.a}}),c={render:function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"ccontent"},[e("v-header",{attrs:{headtitle:t.headtitle}}),t._v(" "),e("div",{staticClass:"content"},[e("div",{staticClass:"content-top vux-1px-b"},[e("div",{staticClass:"name"},[e("img",{attrs:{src:i("MEVE"),alt:""}}),t._v(" "),e("span",[t._v(t._s(t.name))])]),t._v(" "),e("div",{staticClass:"time"},[t._v(t._s(t.nowDate))])]),t._v(" "),e("div",{staticClass:"content-bottom"},[e("div",{staticClass:"dk-box vux-1px-l"},[e("div",{staticClass:"dk-top"},[e("div",{staticClass:"dot"}),t._v(" "),e("div",{staticClass:"gd-time"},[t._v("上班时间 "+t._s(t.worktime))])]),t._v(" "),e("div",{staticClass:"dk-inner-box"},[t.showDkbtn?e("div",{staticClass:"dking"},[e("div",{staticClass:"dk-btn",class:t.btnsbBg,on:{click:function(s){t.dkEvent("sbclockin")}}},[e("div",{staticClass:"primary-text"},[t._v("上班打卡")]),t._v(" "),e("div",{staticClass:"sub-text"},[t._v(t._s(t.nowTime))])]),t._v(" "),e("div",{staticClass:"dk-bottom"},[t._v("请在上班时间前打卡")])]):t._e(),t._v(" "),t.showDkbtn?t._e():e("div",{staticClass:"dked"},[e("div",{staticClass:"dked-text"},[t._v("打卡时间 "+t._s(t.morningdkTime))])])])]),t._v(" "),e("div",{staticClass:"dk-box"},[t._m(0),t._v(" "),e("div",{staticClass:"dk-inner-box"},[t.showDkedbtn?e("div",{staticClass:"dking"},[e("div",{staticClass:"dk-btn",class:t.btnxbBg,on:{click:function(s){t.dkEvent("xbclockin")}}},[e("div",{staticClass:"primary-text"},[t._v("下班打卡")]),t._v(" "),e("div",{staticClass:"sub-text"},[t._v(t._s(t.nowTime))])]),t._v(" "),e("div",{staticClass:"dk-bottom"},[t._v("请在下班后打卡哦~")])]):t._e(),t._v(" "),t.showDkedbtn?t._e():e("div",{staticClass:"dked"},[e("div",{staticClass:"dked-text"},[t._v("打卡时间 "+t._s(t.noondkTime))])])])])]),t._v(" "),t._m(1)])],1)},staticRenderFns:[function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"dk-top"},[s("div",{staticClass:"dot"}),this._v(" "),s("div",{staticClass:"gd-time"},[this._v("下班时间17:00")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"content-reminder"},[s("div",{staticClass:"reminder-icon"},[s("img",{attrs:{src:i("JU/T"),alt:""}}),this._v("提示：")]),this._v(" "),s("div",{staticClass:"reminder-text"},[s("p",[this._v("1, 早上9:00开始请假无需打上班卡")]),this._v(" "),s("p",[this._v("2, 请假结束到下班时间无需打下班卡")])])])}]};var d=i("VU/8")(o,c,!1,function(t){i("cIk4")},"data-v-80740c5e",null);s.default=d.exports},MEVE:function(t,s){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAH2ElEQVR4Xu1bf4wcZRl+3tn7tTez19q7nSUtAWwb7mYvjRcSMdRKMJLUSDRW/lAIBhEUNGhSlFYQE4lCpEglwUCs8kOjSBp/8gf0DxTDlRKJifGP7txif0nKye7cHak3c3ft3sxjZq/V2+7u7Mzs3F2bdv9qb973eZ/vmW++7/2+7/0EF/hPLvD246IAF3vAEitADnfZk/Nb4KauBbgWkJyAOQA6AP//LsASgX8DMuH/W1F43BPu1/qLoyKoLCXFJfkESKRmLGOrR9whkK0Q9MZqBDFDwcuK8NneAXOfCNxYOAFOiQpAXtHjTKTvAvFNQNYlS5bvQPBDdaDylMihk0lhJyIAiQ67bHxZRL4D4JKkyDXBeZfk9zTd3COC+XZjtS2AYw190qPyIwE2tEsmij+Bw4q496jZ4otR/M62jS2A/507ZeNRiGxvh0DbvsRuVS/siDs+xBKAU+tXOZXu30Dk+rYbkAQA8Se1c+5GWXPkRFS4yALMTFy5zvVSfxbIlVGDLaU9wWIqVbm+t//Q8ShxIgkwOzV8mTvvvQHI2ihBls+W46kO5Zr0moNvh40ZWgD+Z6jfnlXeFMH6sOArYUfiiJb2rpa+sckw8UMJQKLTKef3Q3B1GNAVtyHeVPXCljBZZCgB7LLxHCC3rnjDIhHgzzXd/EIrl5YC2NbQTaDyfCugsM/9LirCPaC7T9XfKvhvaXp6g67MdW/ziHsTzSfEu1nLjv06iFugAOTGbsfqPJLQoDdP4iFNl4dFDp5qRKqaW1jG3QAeAyQVVtTmdhxXs5X1QalzoABOOX8/gYcSIOKlINel9cJoGCzHMm4g8SIgShj7Fm/426peeLiZTVMBFpKdHn8BorZLgsSDmVzhu1Fw7HL+PgBNiYfFInhC6zh5ebMkqakAtmXsAuXesIEC7I6r2VMbo67gTqfa/4DIcNschI9qWXNHI5yGAvjTnm3lpwTQ2g4O7z5NH/tBHJzp8tDdAuWJOL6LfQhOa1mzv9G02FCAmZKxzRP5XbuBfX8R94Nqtvi3OFhz1uDgPFNjcXzP9lHIz/TmzN+f/feGAthl4wVAPptEYLVnPit9b03EwWJ5WHPA6Ti+9T7cq+lmXZvqBCAhtmW8J5BViQTm7CVa7mgpDhYnN/Y5blfkFV7DKdYfDLPm+0TAxc/rBJgpDX7Yk9T+OISbDDJXqXrh73Hw7PLwCMBYvo3iKXS39OaKrwcKYJeNnYDEGrQaNpLcqeXMXfEESGYq/H/s+gG5rgfYZeNpQL4Yh3ATAY6purlBBF4UTH+f0SnnD0NwWRS/YFs+renmHYE9YLpsvCaQjyQXFCC8r2X0sR9HwXRKxlco8mQUn1a2BEczunlt8CdQMo5A5P2twCI+r0DhJ7QB85Uwfo5lXEUPByDSHcY+tA15TMuZNW2r+wSmS/lJEawJDRrakC6I+1VdeTxgMSSz1uCNLlLPJpOE1ZIjMZXJFfpbDYKen76EbldUQ+JtivfLFPlSOs0ioNA+iU3i4QaI8jkAl0aFDG9PT9PNmlVm/SBYyp+EoCs86HlkSZzScoWaz6rBJ2BMiEhNNzmPmhhIleRkJmcOBM8Cpfzh5dj4JDkhgn8RsH1CAvQBsglAx5IJTh7VcmbNpm6jPOBVQK5LkMQ8wQMCvqyQo9KN8Z5V7nij5bF/lD4zWfkAqIx4lBGBbAYwkhwX/kXTzY+2ygN+KpCaZCEyAcKBYK8C96U0OvaJfrD6luP87KmhTZyXuwDcIpC+OBhnfAj+LKObX2qVB+yAyCMxA1UE3OOlKw9mMoesmBgN3fhuTp2R/s8T9PnFzFP4LU03a9pWvxiaHLrGc5UDkcmTf+1QvFt7ssViZN8IDqdXiHsBbI3gVjVVUt7m3v6xNwJ7wMJyuLobtDp8AP5CzZq3Rc33w+PXWlY5lvNPieDOsBjVvcEwy2Ef0C4Zz0PkpjDgBP+pZU+MiIzPhLFPysbfM7Qt49Xw6xa+oOlmXZsaZnzOhPFpelK3fdSIvAC3q3rhmaQaFgUnyqGNKNymDph/OBu/yabocJdteRMCybQilOpy16dXF4+2sluK57PvGZe7FTnWCjvypmj1M7CMR0BpuJW8OKAKybQzzbUiH/ScXNvrWKudlhjCXVrW3NmkBzd2D3swsrIC+Ed3XXOBAhCO2jm3LvLBiA8a5mhsZQVAh2PlAwspBXxA1c2mx3stDkev6HGs9KGgmj9V3D7JFhPaum7ZmWsMFg5T8wGlcm0eji6MBUM3g8qvmlITbtey5uPRqCdj7ZfokUrzMjnBLVq20Jz7wiKs9c8u5/1p7rbWlueSRUIFEn6TFkpkjFGIfOhcamJTLkmXyFRFuJCLpM4ofbpM7kDyhdBJ9Su+k+pQNi9JmdwZijOTGy913c5XBDKYFO0kcJalUPIM0dNJ0m8h+FgS5NvGWM5S2f+JUJ2Dh3YDytfbbkAbAAI80ZstbF/WYunFfB1r8FMeU7sTLW8LIUi1XF7BN9SBwh9DmDdPY9pxXtQbOmzLuFMgDyzLhQnw+1rW/Mk5cWFisYALV2Z6vgrKPcnPFNUrM4+pA5UnoxZcBb3kUJlg1F5SvTQ1YXzc83B7+5emuE8RPHNeXJpqJFSja3MAdQH8q3NNr81RlNfV/sJrYQqeo76gxfZL0gPaIbTcvhcFWG7Fz7V4F3wP+C8WASRuRQzKpQAAAABJRU5ErkJggg=="},VFiX:function(t,s,i){"use strict";var e=i("LMSR"),n={INSERTKQRECORD:function(t,s){return t.$http.post(e.a+"zhfwgl/leave/kqgldk/kqgldkAction!insertKqRecord.do",s)},KQGLDKLIST:function(t,s){return t.$http.post(e.a+"zhfwgl/leave/kqgldk/kqgldkAction!Kqgldklist.do",s)},QUERYUSERDKTIME:function(t,s){return t.$http.post(e.a+"zhfwgl/leave/kqgldk/kqgldkAction!queryUserDkTime.do",s)}};s.a=n},cIk4:function(t,s){}});
//# sourceMappingURL=11.f6ef7176d535b7a7dbcf.js.map